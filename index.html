<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="icon" href="public/favicon.png" />
    <title>Tesseract</title>
    <link rel="stylesheet" href="public/bootstrap/bootstrap.min.css" />
    <script src="public/bootstrap/bootstrap.min.js"></script>
    <script src="public/js/tesseract.min.js"></script>
  </head>
  <body>
    <form id="form">
      <label>Nhập đường link hình ảnh</label>
      <input
        id="img-url"
        type="text"
        value="https://upload.wikimedia.org/wikipedia/commons/5/5f/Dr._Jekyll_and_Mr._Hyde_Text.jpg"
      />
      <select id="lang">
        <option value="vie">Vietnamese</option>
        <option value="eng">English</option>
      </select>
      <button type="submit">Run</button>
    </form>
    <div>
      <div style="width: 50%; float: left">
        <h4>Kết quả</h4>
        <div>
          <textarea id="result" rows="15" style="width: 90%"></textarea>
        </div>
      </div>
      <div style="width: 50%; float: left">
        <h4>Tiến trình</h4>
        <div id="runing" style="max-height: 80%; overflow: auto"></div>
      </div>
    </div>
    <script type="text/javascript">
      document.getElementById("form").onsubmit = function (e) {
        e.preventDefault();
        document.getElementById("result").value = "";
        document.getElementById("runing").innerHTML = "";
        var img = document.getElementById("img-url").value;
        var lang = document.getElementById("lang").value;
        Tesseract.recognize(img, lang, {
          logger: (m) => {
            console.log(m);
            var objDiv = document.getElementById("runing");
            objDiv.innerHTML += "<div>" + JSON.stringify(m) + "</div>";
            objDiv.scrollTop = objDiv.scrollHeight;
          },
        }).then(({ data: { text } }) => {
          console.log(text);
          document.getElementById("result").value = text;
        });
      };
    </script>
  </body>
</html>
